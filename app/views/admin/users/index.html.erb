<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h5 mb-0">Admin • Usuários</h1>
</div>

<div class="card shadow-sm">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover mb-0 align-middle">
        <thead class="table-light">
        <tr>
          <th>Nome</th>
          <th>Email</th>
          <th>Perfil</th>
          <th>Status</th>
          <th>Criado em</th>
          <th class="text-end">Ações</th>
        </tr>
        </thead>
        <tbody>
        <% @users.each do |u| %>
          <tr>
            <td><%= u.nome.presence || "-" %></td>
            <td><%= u.email %></td>
            <td>
              <% if u.admin? %>
                <span class="badge text-bg-primary">Admin</span>
              <% else %>
                <span class="badge text-bg-secondary">Usuário</span>
              <% end %>
            </td>
            <td>
              <% if u.suspended? %>
                <span class="badge text-bg-danger">Suspenso</span>
              <% else %>
                <span class="badge text-bg-success">Ativo</span>
              <% end %>
            </td>
            <td><%= l(u.created_at, format: :br) rescue u.created_at.to_date %></td>
            <td class="text-end">
              <% if u.suspended? %>
                <%= link_to "Reativar",
                            reactivate_admin_user_path(u),
                            data: { turbo_method: :patch, turbo_confirm: "Reativar este usuário?" },
                            class: "btn btn-sm btn-outline-success" %>
              <% else %>
                <%= link_to "Suspender",
                            suspend_admin_user_path(u),
                            data: { turbo_method: :patch, turbo_confirm: "Suspender este usuário?" },
                            class: "btn btn-sm btn-outline-danger" %>
              <% end %>
            </td>
          </tr>
        <% end %>
        <% if @users.empty? %>
          <tr>
            <td colspan="6" class="text-center text-muted py-4">Nenhum usuário encontrado.</td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="mt-3 d-flex justify-content-center">
  <%= paginate @users %>
</div>
